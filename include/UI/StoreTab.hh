// generated by Fast Light User Interface Designer (fluid) version 1.0308

#pragma once

#include <FL/Fl_Browser.H>
#include <FL/Fl_Button.H>
#include <FL/Fl_Hold_Browser.H>
#include <FL/Fl_Output.H>
#include <FL/Fl_Table.H>
#include <FL/Fl_Text_Display.H>

#include "UI/Tab.hh"

class DLCTable;

class StoreTab : public Tab {
public:
  StoreTab(const StoreTab &) = delete;
  StoreTab &operator=(const StoreTab &) = delete;
  virtual ~StoreTab() = default;

  StoreTab(State &s);

  static void onSearchButton(Fl_Widget *, void *v);

  static void onBuyButton(Fl_Widget *, void *v);

  static void onBrowserClick(Fl_Widget *, void *v);

  static void onDlcBrowserClick(Fl_Widget *, void *v);

  void initGamesList();


private:
  std::vector<GameInfo> shownGames;
  std::vector<DLCInfo> shownDLCs;

  void updateGamesList();
  void updateGameDLCsList(GameInfo game);
  void loadDLCData(int gameID, int dlcID);

  Fl_Output *priceLabel;
  Fl_Output *statusLabel;
  Fl_Text_Display *description;
  Fl_Text_Buffer *descriptionBuf;
  Fl_Input *searchInput;
  Fl_Hold_Browser *gameList;
  DLCTable *dlcList;
  Fl_Output *gameName;
  Fl_Button *buyButton;
  Fl_Button *searchButton;

  // Chyba najgłupszy sposób przekazania argumentów do callback'u ale nie
  // chce mi się wymyślać nic innego co by działało
  std::vector<std::pair<unsigned, void *>> tableArgs;
};
